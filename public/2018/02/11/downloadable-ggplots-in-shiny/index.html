<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.20.7" />


<title>Downloadable ggplots in shiny - experiments with R</title>
<meta property="og:title" content="Downloadable ggplots in shiny - experiments with R">



  








<link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="../../../../css/fonts.css" media="all">
<link rel="stylesheet" href="../../../../css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="../../../../" class="nav-logo">
    <img src="../../../../images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="../../../../page/about/">About</a></li>
    
    <li><a href="../../../../post/">Blog</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">2 min read</span>
    

    <h1 class="article-title">Downloadable ggplots in shiny</h1>

    
    <span class="article-date">2018/02/11</span>
    

    <div class="article-content">
      <div id="a-use-case-for-shiny-modules" class="section level1">
<h1>A use-case for shiny modules</h1>
<p>Plotly comes with a built-in download option for every plot, but what if you would like to provide a similar functionality to multiple ggplot2 plots in your shiny app? I will show you that with modules you can simplify the code.</p>
<div id="without-modules" class="section level2">
<h2>Without modules</h2>
<p>Your code in ui might look like this:</p>
<pre class="r"><code># ui.R
# ...
numericInput(&quot;sample_ratio&quot;, ...),
plotOutput(&quot;mtcars&quot;),
downloadButton(&quot;mtcars_download&quot;),
plotOutput(&quot;iris&quot;),
downloadButton(&quot;iris_download&quot;),</code></pre>
<p>and your code in server might look like this:</p>
<pre class="r"><code># server.R
# ...
output$mtcars &lt;- renderPlot({
    ...
})
output$mtcars_download &lt;- downloadHandler({
    ...
})
output$iris &lt;- renderPlot({
    ...
})
output$iris_download &lt;- downloadHandler({
    ...
})</code></pre>
<p>The different plots hold the relevant parts but you have to duplicate the download parts although they are the same. Moreover if you decide to add an option not only to download the plot but also the data you have to add the code to every plot.</p>
</div>
<div id="with-modules" class="section level2">
<h2>With modules</h2>
<p>You can focus on the fundamentally different parts, moreover your code is less error-prone (e.g accidentally download the same plot from two different buttons.) You also do not have to worry about having to give a different name to every one of your download buttons.</p>
<pre class="r"><code># ui.R
plotDownloadUI(&quot;mtcars&quot;),
plotDownloadUI(&quot;iris&quot;)
# server.R
...
callModule(plotDownload, &quot;mtcars&quot;, plotMtcarsReactive)
callModule(plotDownload, &quot;iris&quot;, plotIrisReactive)</code></pre>
<pre class="r"><code>plotDownloadUI &lt;- function(id, height = 400) {
    ns &lt;- NS(id)
    tagList(
        fluidRow(
            plotOutput(ns(&#39;plot&#39;), height = height)
        ),
        fluidRow(
            column(
                2, offset = 10,
                downloadButton(ns(&quot;download_plot&quot;), &quot;Download figure&quot;)
            )
        )
    )
}

plotDownload &lt;- function(input, output, session, plotFun) {
    output$plot &lt;- renderPlot({
        plotFun()
    })
    
    output$download_plot &lt;- downloadHandler(
        filename = function() {
            &quot;plot.png&quot;
        },
        content = function(file) {
            ggsave(file, plotFun(), width = 16, height = 10.4)
        }
    )
}</code></pre>
<p>The whole code is available <a href="https://github.com/czeildi/shiny-modules-examples">here</a> and you can see the working app <a href="https://ildi-czeller.shinyapps.io/shiny-modules-examples/">here</a>.</p>
</div>
</div>

    </div>
  </article>

  
<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var d = document, s = d.createElement('script');
    s.src = '//ildiczeller.disqus.com/embed.js'; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>



</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
              <a href = "https://github.com/czeildi">
                   <img src="../../../../images/github-logo.png" width="22" height="22">
              </a>
          </li>
          <li>
              <a href = "https://twitter.com/czeildi">
                  <img src="../../../../images/twitter-logo.png" width="22" height="22">
              </a>
          </li>
          <li>
              <a href = "https://www.linkedin.com/in/ildiko-czeller-310465a7">
                  <img src="../../../../images/linkedin-logo.png" width="22" height="22">
              </a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="../../../../js/math-code.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

